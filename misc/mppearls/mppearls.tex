% More Programming Pearls
% Confessions of a Coder
% Jon Bentley
%

\font\sc=cmcsc10
\font\ninerm=cmr9
\font\ninesy=cmsy9
\font\twelverm=cmr12
\font\titlefont=cmssdc10 at 16pt

\font\eightrm=cmr8
\font\eighti=cmmi8
\font\eightsy=cmsy8
\font\eightss=cmssq8
\font\eightbf=cmbx8
\font\eightsl=cmsl8
\font\eightit=cmti8
\def\eightpoint{\def\rm{\fam0\eightrm}%
  \textfont0=\eightrm \textfont1=\eighti \textfont2=\eightsy
  \def\it{\fam\itfam\eightit}\textfont\itfam=\eightit
  \def\sl{\fam\slfam\eightsl}\textfont\slfam=\eightsl
  \def\bf{\fam\bffam\eightbf}\textfont\bffam=\eightbf
  \let\big=\eightbig
  \setbox\strutbox=\hbox{\vrule height7pt depth2pt width0pt}%
  \normalbaselineskip=9pt\normalbaselines\rm}
\def\eightbig#1{{\hbox{$\textfont0=\ninerm\textfont2=\ninesy
  \left#1\vbox to6.5pt{}\right.\nulldelimiterspace0pt$}}}

% macros for non-centered displays
\outer\def\begindisplay{\obeylines\startdisplay}
{\obeylines\gdef\startdisplay#1
  {\catcode`\^^M=5$$#1\halign\bgroup\indent##\hfil&&\qquad##\hfil\cr}}
\outer\def\enddisplay{\crcr\egroup$$}

% section
\newcount\secno
\outer\def\section#1\par{\vskip0pt plus.3\vsize
  \vskip0pt plus-.3\vsize\medskip\bigskip\vskip\parskip\advance\secno by1
  \leftline{\bf\colno.\the\secno\ #1}\nobreak\medskip}

% problem
\newcount\pno
\def\prob{\penalty-50\medskip\hangindent 1.5em
  \advance\pno by1 \noindent\hbox to 1.5em{\the\pno.\hss}}
\def\more{\hangindent 1.5em \hangafter0\noindent}
\def\pitm#1{\hangindent 3em \hangafter0\noindent\llap{#1\enspace}\ignorespaces}

\def\PP{\hbox{\kern.5pt\raise1pt\hbox{\sevenrm+\kern-1pt+}\kern.5pt}}
\def\alg#1{{Algorithm\kern1pt\hbox{#1}}}
\def\ltdot{\mathinner{\ldotp\ldotp}}

\def\column{column {\eightrm\colno}}
\newif\iftitle
\headline={\iftitle\hfil\else\ifodd\pageno\rheader\else\lheader\fi\fi}
\footline={\iftitle\global\titlefalse\hfil\the\pageno\hfil\else\hfil\fi}
\def\lheader{\ninerm\the\pageno\quad\sc more programming pearls\hfill\column}
\def\rheader{\sc\column\hfill\title\quad{\ninerm\the\pageno}}
\def\columntitle#1:#2\par{\def\colno{#1}\def\title{#2}
  \topglue1.5in\rightline{\twelverm COLUMN \colno:\quad{\titlefont
  \uppercase\expandafter{\title\unskip}}}\vskip1in}
\titletrue

\magnification=\magstep1
\voffset=2\baselineskip
\topskip6mm
\hsize 28.6pc
\vsize 46pc
